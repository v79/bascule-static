buildscript {
	ext.handlebars_version = '4.1.0'
	ext.slf4j_version = '1.6.2'
	ext.flexmark_version = '0.34.22'
}

plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.2.61'
}

group 'org.liamjd'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
	jcenter()
}

dependencies {
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8"

	// handlebars templating
	compile group: 'com.github.jknack', name: 'handlebars', version: "$handlebars_version"

	// markdown - probably want to be more selective with this!
	compile group: 'com.vladsch.flexmark', name:'flexmark-all', version: "$flexmark_version"

	// snakeyaml
	compile 'org.yaml:snakeyaml:1.23'

	// sl4j logging
	compile group: 'org.slf4j', name: 'slf4j-simple', version: "$slf4j_version"

	// command line parsing
	compile 'info.picocli:picocli:3.5.2'
	compile 'org.fusesource.jansi:jansi:1.17.1'
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}


sourceSets {
	main.resources.srcDirs += ['src/main/resources']
}

jar{
	// required for building JAR files
	baseName = 'bascule'
	version = '0.0.1'
	manifest {
		attributes(
				'Main-Class': 'org.liamjd.bascule.MainKt'
		)
	}

	from('/src/main/resources') {
		include '*'
	}

	from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

